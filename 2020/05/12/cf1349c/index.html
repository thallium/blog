<!doctype html><html lang=en><head><meta charset=utf-8><title>Tutorial for Codeforces 1349C/1350E - Orac and Game of Life</title><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=alternate type=application/rss+xml href=https://tgc-thallium.com/blog/index.xml title="Thallium's Blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="Tutorial for Codeforces 1349C/1350E - Orac and Game of Life"><meta name=twitter:description content="为啥我就想不起来多源bfs呢？"><link rel=stylesheet href=https://tgc-thallium.com/blog/fontawesome/css/all.min.css><link rel=stylesheet href=https://tgc-thallium.com/blog/css/main.css><link id=dark-mode-theme rel=stylesheet href=https://tgc-thallium.com/blog/css/dark.css><script>var darkTheme=document.getElementById('dark-mode-theme'),storedTheme=localStorage.getItem('dark-mode-storage');storedTheme==='dark'?darkTheme.disabled=!1:storedTheme==='light'&&(darkTheme.disabled=!0)</script><script src=https://tgc-thallium.com/blog/js/main.bundle.js></script><script src=https://tgc-thallium.com/blog/js/instantpage.min.js type=module defer></script><meta name=generator content="Hugo 0.83.1"></head><body><header><nav class=navbar><div class=nav><ul class=nav-links><li><a href=/blog/ id=Home><em class="fas fa-home fa-lg"></em></a></li><li><a href=/blog/about/ id=About><em class="fas fa-user fa-lg"></em></a></li><li><a href=/blog/tags/ id=Tags><em class="fas fa-tag fa-lg"></em></a></li><li><a href=/blog/categories/ id=Categories><em class="fas fa-list fa-lg"></em></a></li><li><a href=/blog/archives/ id=Archives><em class="fas fa-archive fa-lg"></em></a></li><li><a href=/blog/search/ id=Search><em class="fas fa-search fa-lg"></em></a></li></ul></div></nav><div class=intro-header><div class=container><div class=post-heading><h1>Tutorial for Codeforces 1349C/1350E - Orac and Game of Life</h1><span class=meta-post><em class="fa fa-calendar-alt"></em>&nbsp;May 12, 2020</span></div></div></div></header><div class=container role=main><article class=article class=blog-post><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.13.5/dist/katex.min.css integrity=sha384-L+Gq2Cso/Y2x8fX4wausgiZT8z0QPZz7OqPuz4YqAycQJyrJT9NRLpjFBD6zlOia crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.13.5/dist/katex.min.js integrity=sha384-z64WtjpyrKFsxox9eI4SI8eM9toXdoYeWb5Qh+8PO+eG54Bv9BZqf9xNhlcLf/sA crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.13.5/dist/contrib/auto-render.min.js integrity=sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl crossorigin=anonymous></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:'$$',right:'$$',display:!0},{left:'$',right:'$',display:!1},{left:'\\(',right:'\\)',display:!1},{left:'\\[',right:'\\]',display:!0}],throwOnError:!1})})</script><p>为啥我就想不起来多源bfs呢？</p><h2 id=solution>Solution</h2><p>Let&rsquo;s call a cell bad if no adjacent cell has the same color, otherwise that cell is good.</p><p>If a good cell and a bad cell are adjacent, according to the definition, the good cell will change color in the next iteration while the bad cell not. As the result, the bad cell will turn into a good cell. Therefore, a bad cell won&rsquo;t change if all the cells are bad cells, otherwise it will become good when the nearest good cell reaches it. The left thing is to find the nearest good cell for all cells. This can be done using multi-source bfs.</p><h2 id=code>Code</h2><p>{% raw %}</p><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;bits/stdc++.h&gt;</span><span style=color:#75715e>
</span><span style=color:#75715e></span>
<span style=color:#75715e>#define forn(i, n) for (int i = 0; i &lt; int(n); ++i)
</span><span style=color:#75715e>#define for1(i, n) for (int i = 1; i &lt;= int(n); ++i)
</span><span style=color:#75715e>#define ms(a, x) memset(a, x, sizeof(a))
</span><span style=color:#75715e>#define F first
</span><span style=color:#75715e>#define S second
</span><span style=color:#75715e>#define all(x) (x).begin(),(x).end()
</span><span style=color:#75715e>#define pb push_back
</span><span style=color:#75715e></span>
<span style=color:#00a8c8>using</span> <span style=color:#00a8c8>namespace</span> <span style=color:#111>std</span><span style=color:#111>;</span>
<span style=color:#00a8c8>typedef</span> <span style=color:#00a8c8>long</span> <span style=color:#00a8c8>long</span> <span style=color:#111>ll</span><span style=color:#111>;</span>
<span style=color:#00a8c8>typedef</span> <span style=color:#111>pair</span><span style=color:#f92672>&lt;</span><span style=color:#00a8c8>int</span><span style=color:#111>,</span> <span style=color:#00a8c8>int</span><span style=color:#f92672>&gt;</span> <span style=color:#111>pii</span><span style=color:#111>;</span>
<span style=color:#00a8c8>const</span> <span style=color:#00a8c8>int</span> <span style=color:#111>INF</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0x3f3f3f3f</span><span style=color:#111>;</span>
<span style=color:#111>mt19937</span> <span style=color:#75af00>gen</span><span style=color:#111>(</span><span style=color:#111>chrono</span><span style=color:#f92672>::</span><span style=color:#111>steady_clock</span><span style=color:#f92672>::</span><span style=color:#111>now</span><span style=color:#111>().</span><span style=color:#111>time_since_epoch</span><span style=color:#111>().</span><span style=color:#111>count</span><span style=color:#111>());</span>
<span style=color:#00a8c8>template</span><span style=color:#f92672>&lt;</span><span style=color:#00a8c8>typename</span><span style=color:#111>...</span> <span style=color:#111>T</span><span style=color:#f92672>&gt;</span> <span style=color:#00a8c8>void</span> <span style=color:#111>rd</span><span style=color:#111>(</span><span style=color:#111>T</span><span style=color:#f92672>&amp;</span><span style=color:#111>...</span> <span style=color:#111>args</span><span style=color:#111>)</span> <span style=color:#111>{((</span><span style=color:#111>cin</span><span style=color:#f92672>&gt;&gt;</span><span style=color:#111>args</span><span style=color:#111>),</span> <span style=color:#111>...);}</span>
<span style=color:#00a8c8>template</span><span style=color:#f92672>&lt;</span><span style=color:#00a8c8>typename</span><span style=color:#111>...</span> <span style=color:#111>T</span><span style=color:#f92672>&gt;</span> <span style=color:#00a8c8>void</span> <span style=color:#111>wr</span><span style=color:#111>(</span><span style=color:#111>T</span><span style=color:#111>...</span> <span style=color:#111>args</span><span style=color:#111>)</span> <span style=color:#111>{((</span><span style=color:#111>cout</span><span style=color:#f92672>&lt;&lt;</span><span style=color:#111>args</span><span style=color:#f92672>&lt;&lt;</span><span style=color:#d88200>&#34; &#34;</span><span style=color:#111>),</span> <span style=color:#111>...);</span><span style=color:#111>cout</span><span style=color:#f92672>&lt;&lt;</span><span style=color:#111>endl</span><span style=color:#111>;}</span>

<span style=color:#00a8c8>const</span> <span style=color:#111>vector</span><span style=color:#f92672>&lt;</span><span style=color:#111>pii</span><span style=color:#f92672>&gt;</span> <span style=color:#111>dir</span><span style=color:#111>{{</span><span style=color:#ae81ff>1</span><span style=color:#111>,</span><span style=color:#ae81ff>0</span><span style=color:#111>,},{</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span><span style=color:#111>,</span><span style=color:#ae81ff>0</span><span style=color:#111>},{</span><span style=color:#ae81ff>0</span><span style=color:#111>,</span><span style=color:#ae81ff>1</span><span style=color:#111>},{</span><span style=color:#ae81ff>0</span><span style=color:#111>,</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span><span style=color:#111>}};</span>
<span style=color:#00a8c8>int</span> <span style=color:#75af00>main</span><span style=color:#111>()</span> <span style=color:#111>{</span>
    <span style=color:#111>ios</span><span style=color:#f92672>::</span><span style=color:#111>sync_with_stdio</span><span style=color:#111>(</span><span style=color:#111>false</span><span style=color:#111>);</span>
    <span style=color:#111>cin</span><span style=color:#111>.</span><span style=color:#111>tie</span><span style=color:#111>(</span><span style=color:#00a8c8>nullptr</span><span style=color:#111>);</span>
    <span style=color:#00a8c8>int</span> <span style=color:#111>n</span><span style=color:#111>,</span><span style=color:#111>m</span><span style=color:#111>,</span><span style=color:#111>t</span><span style=color:#111>;</span>
    <span style=color:#111>cin</span><span style=color:#f92672>&gt;&gt;</span><span style=color:#111>n</span><span style=color:#f92672>&gt;&gt;</span><span style=color:#111>m</span><span style=color:#f92672>&gt;&gt;</span><span style=color:#111>t</span><span style=color:#111>;</span>
    <span style=color:#111>vector</span><span style=color:#f92672>&lt;</span><span style=color:#111>string</span><span style=color:#f92672>&gt;</span> <span style=color:#111>G</span><span style=color:#111>(</span><span style=color:#111>n</span><span style=color:#111>);</span>
    <span style=color:#00a8c8>for</span><span style=color:#111>(</span><span style=color:#00a8c8>auto</span><span style=color:#f92672>&amp;</span> <span style=color:#111>it</span><span style=color:#111>:</span><span style=color:#111>G</span><span style=color:#111>)</span> <span style=color:#111>cin</span><span style=color:#f92672>&gt;&gt;</span><span style=color:#111>it</span><span style=color:#111>;</span>
    <span style=color:#111>queue</span><span style=color:#f92672>&lt;</span><span style=color:#111>pii</span><span style=color:#f92672>&gt;</span> <span style=color:#111>q</span><span style=color:#111>;</span>
    <span style=color:#00a8c8>auto</span> <span style=color:#111>cango</span><span style=color:#f92672>=</span><span style=color:#111>[</span><span style=color:#f92672>&amp;</span><span style=color:#111>](</span><span style=color:#00a8c8>int</span> <span style=color:#111>x</span><span style=color:#111>,</span><span style=color:#00a8c8>int</span> <span style=color:#111>y</span><span style=color:#111>){</span>
        <span style=color:#00a8c8>return</span> <span style=color:#111>x</span><span style=color:#f92672>&gt;=</span><span style=color:#ae81ff>0</span><span style=color:#f92672>&amp;&amp;</span><span style=color:#111>x</span><span style=color:#f92672>&lt;</span><span style=color:#111>n</span><span style=color:#f92672>&amp;&amp;</span><span style=color:#111>y</span><span style=color:#f92672>&gt;=</span><span style=color:#ae81ff>0</span><span style=color:#f92672>&amp;&amp;</span><span style=color:#111>y</span><span style=color:#f92672>&lt;</span><span style=color:#111>m</span><span style=color:#111>;</span>
    <span style=color:#111>};</span>
    <span style=color:#111>vector</span><span style=color:#f92672>&lt;</span><span style=color:#111>vector</span><span style=color:#f92672>&lt;</span><span style=color:#00a8c8>int</span><span style=color:#f92672>&gt;&gt;</span> <span style=color:#111>dis</span><span style=color:#111>(</span><span style=color:#111>n</span><span style=color:#111>,</span><span style=color:#111>vector</span><span style=color:#f92672>&lt;</span><span style=color:#00a8c8>int</span><span style=color:#f92672>&gt;</span><span style=color:#111>(</span><span style=color:#111>m</span><span style=color:#111>,</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span><span style=color:#111>));</span>
    <span style=color:#111>forn</span><span style=color:#111>(</span><span style=color:#111>i</span><span style=color:#111>,</span><span style=color:#111>n</span><span style=color:#111>){</span>
        <span style=color:#111>forn</span><span style=color:#111>(</span><span style=color:#111>j</span><span style=color:#111>,</span><span style=color:#111>m</span><span style=color:#111>){</span>
            <span style=color:#00a8c8>bool</span> <span style=color:#111>ok</span><span style=color:#f92672>=</span><span style=color:#ae81ff>0</span><span style=color:#111>;</span>
            <span style=color:#00a8c8>for</span><span style=color:#111>(</span><span style=color:#00a8c8>auto</span> <span style=color:#111>[</span><span style=color:#111>dx</span><span style=color:#111>,</span><span style=color:#111>dy</span><span style=color:#111>]</span><span style=color:#f92672>:</span><span style=color:#111>dir</span><span style=color:#111>){</span>
                <span style=color:#00a8c8>int</span> <span style=color:#111>x</span><span style=color:#f92672>=</span><span style=color:#111>i</span><span style=color:#f92672>+</span><span style=color:#111>dx</span><span style=color:#111>,</span><span style=color:#111>y</span><span style=color:#f92672>=</span><span style=color:#111>j</span><span style=color:#f92672>+</span><span style=color:#111>dy</span><span style=color:#111>;</span>
                <span style=color:#00a8c8>if</span><span style=color:#111>(</span><span style=color:#111>cango</span><span style=color:#111>(</span><span style=color:#111>x</span><span style=color:#111>,</span><span style=color:#111>y</span><span style=color:#111>)</span><span style=color:#f92672>&amp;&amp;</span><span style=color:#111>G</span><span style=color:#111>[</span><span style=color:#111>x</span><span style=color:#111>][</span><span style=color:#111>y</span><span style=color:#111>]</span><span style=color:#f92672>==</span><span style=color:#111>G</span><span style=color:#111>[</span><span style=color:#111>i</span><span style=color:#111>][</span><span style=color:#111>j</span><span style=color:#111>])</span> <span style=color:#111>ok</span><span style=color:#f92672>=</span><span style=color:#ae81ff>1</span><span style=color:#111>;</span>
            <span style=color:#111>}</span>
            <span style=color:#00a8c8>if</span><span style=color:#111>(</span><span style=color:#111>ok</span><span style=color:#111>){</span>
                <span style=color:#111>dis</span><span style=color:#111>[</span><span style=color:#111>i</span><span style=color:#111>][</span><span style=color:#111>j</span><span style=color:#111>]</span><span style=color:#f92672>=</span><span style=color:#ae81ff>0</span><span style=color:#111>;</span>
                <span style=color:#111>q</span><span style=color:#111>.</span><span style=color:#111>emplace</span><span style=color:#111>(</span><span style=color:#111>i</span><span style=color:#111>,</span><span style=color:#111>j</span><span style=color:#111>);</span>
            <span style=color:#111>}</span>
        <span style=color:#111>}</span>
    <span style=color:#111>}</span>
    <span style=color:#00a8c8>while</span><span style=color:#111>(</span><span style=color:#f92672>!</span><span style=color:#111>q</span><span style=color:#111>.</span><span style=color:#111>empty</span><span style=color:#111>()){</span>
        <span style=color:#00a8c8>auto</span> <span style=color:#111>[</span><span style=color:#111>i</span><span style=color:#111>,</span><span style=color:#111>j</span><span style=color:#111>]</span><span style=color:#f92672>=</span><span style=color:#111>q</span><span style=color:#111>.</span><span style=color:#111>front</span><span style=color:#111>();</span>
        <span style=color:#111>q</span><span style=color:#111>.</span><span style=color:#111>pop</span><span style=color:#111>();</span>
        <span style=color:#00a8c8>for</span><span style=color:#111>(</span><span style=color:#00a8c8>auto</span> <span style=color:#111>[</span><span style=color:#111>dx</span><span style=color:#111>,</span><span style=color:#111>dy</span><span style=color:#111>]</span><span style=color:#f92672>:</span><span style=color:#111>dir</span><span style=color:#111>){</span>
            <span style=color:#00a8c8>int</span> <span style=color:#111>x</span><span style=color:#f92672>=</span><span style=color:#111>i</span><span style=color:#f92672>+</span><span style=color:#111>dx</span><span style=color:#111>,</span><span style=color:#111>y</span><span style=color:#f92672>=</span><span style=color:#111>j</span><span style=color:#f92672>+</span><span style=color:#111>dy</span><span style=color:#111>;</span>
            <span style=color:#00a8c8>if</span><span style=color:#111>(</span><span style=color:#111>cango</span><span style=color:#111>(</span><span style=color:#111>x</span><span style=color:#111>,</span><span style=color:#111>y</span><span style=color:#111>)</span><span style=color:#f92672>&amp;&amp;</span><span style=color:#111>dis</span><span style=color:#111>[</span><span style=color:#111>x</span><span style=color:#111>][</span><span style=color:#111>y</span><span style=color:#111>]</span><span style=color:#f92672>==-</span><span style=color:#ae81ff>1</span><span style=color:#111>){</span>
                <span style=color:#111>dis</span><span style=color:#111>[</span><span style=color:#111>x</span><span style=color:#111>][</span><span style=color:#111>y</span><span style=color:#111>]</span><span style=color:#f92672>=</span><span style=color:#111>dis</span><span style=color:#111>[</span><span style=color:#111>i</span><span style=color:#111>][</span><span style=color:#111>j</span><span style=color:#111>]</span><span style=color:#f92672>+</span><span style=color:#ae81ff>1</span><span style=color:#111>;</span>
                <span style=color:#111>q</span><span style=color:#111>.</span><span style=color:#111>emplace</span><span style=color:#111>(</span><span style=color:#111>x</span><span style=color:#111>,</span><span style=color:#111>y</span><span style=color:#111>);</span>
            <span style=color:#111>}</span>
        <span style=color:#111>}</span>
    <span style=color:#111>}</span>
    <span style=color:#00a8c8>while</span><span style=color:#111>(</span><span style=color:#111>t</span><span style=color:#f92672>--</span><span style=color:#111>){</span>
        <span style=color:#00a8c8>int</span> <span style=color:#111>i</span><span style=color:#111>,</span><span style=color:#111>j</span><span style=color:#111>;</span>
        <span style=color:#111>ll</span> <span style=color:#111>p</span><span style=color:#111>;</span>
        <span style=color:#111>cin</span><span style=color:#f92672>&gt;&gt;</span><span style=color:#111>i</span><span style=color:#f92672>&gt;&gt;</span><span style=color:#111>j</span><span style=color:#f92672>&gt;&gt;</span><span style=color:#111>p</span><span style=color:#111>;</span>
        <span style=color:#111>i</span><span style=color:#f92672>--</span><span style=color:#111>,</span><span style=color:#111>j</span><span style=color:#f92672>--</span><span style=color:#111>;</span>
        <span style=color:#00a8c8>if</span><span style=color:#111>(</span><span style=color:#111>dis</span><span style=color:#111>[</span><span style=color:#111>i</span><span style=color:#111>][</span><span style=color:#111>j</span><span style=color:#111>]</span><span style=color:#f92672>==-</span><span style=color:#ae81ff>1</span><span style=color:#111>)</span> <span style=color:#111>cout</span><span style=color:#f92672>&lt;&lt;</span><span style=color:#111>G</span><span style=color:#111>[</span><span style=color:#111>i</span><span style=color:#111>][</span><span style=color:#111>j</span><span style=color:#111>]</span><span style=color:#f92672>&lt;&lt;</span><span style=color:#111>endl</span><span style=color:#111>;</span>
        <span style=color:#00a8c8>else</span> <span style=color:#00a8c8>if</span><span style=color:#111>(</span><span style=color:#111>dis</span><span style=color:#111>[</span><span style=color:#111>i</span><span style=color:#111>][</span><span style=color:#111>j</span><span style=color:#111>]</span><span style=color:#f92672>&gt;=</span><span style=color:#111>p</span><span style=color:#111>)</span> <span style=color:#111>cout</span><span style=color:#f92672>&lt;&lt;</span><span style=color:#111>((</span><span style=color:#111>G</span><span style=color:#111>[</span><span style=color:#111>i</span><span style=color:#111>][</span><span style=color:#111>j</span><span style=color:#111>]</span><span style=color:#f92672>-</span><span style=color:#d88200>&#39;0&#39;</span><span style=color:#111>))</span><span style=color:#f92672>&lt;&lt;</span><span style=color:#111>endl</span><span style=color:#111>;</span>
        <span style=color:#00a8c8>else</span> <span style=color:#111>cout</span><span style=color:#f92672>&lt;&lt;</span><span style=color:#111>((</span><span style=color:#111>G</span><span style=color:#111>[</span><span style=color:#111>i</span><span style=color:#111>][</span><span style=color:#111>j</span><span style=color:#111>]</span><span style=color:#f92672>-</span><span style=color:#d88200>&#39;0&#39;</span><span style=color:#111>)</span><span style=color:#f92672>^</span><span style=color:#111>((</span><span style=color:#111>p</span><span style=color:#f92672>-</span><span style=color:#111>dis</span><span style=color:#111>[</span><span style=color:#111>i</span><span style=color:#111>][</span><span style=color:#111>j</span><span style=color:#111>])</span><span style=color:#f92672>&amp;</span><span style=color:#ae81ff>1</span><span style=color:#111>))</span><span style=color:#f92672>&lt;&lt;</span><span style=color:#111>endl</span><span style=color:#111>;</span>
    <span style=color:#111>}</span>
    <span style=color:#00a8c8>return</span> <span style=color:#ae81ff>0</span><span style=color:#111>;</span>
<span style=color:#111>}</span>
</code></pre></div><p>{% endraw %}</p><div class=blog-tags><a href=https://tgc-thallium.com/blog/tags/bfs/>BFS</a>&nbsp;</div></article></div><footer><div class=social-icons><a href=https://github.com/thallium name=GitHub><em class="fab fa-github"></em></a></div><div class=container><p class="credits copyright"><a href=https://tgc-thallium.com/blog/about>hugo author</a>
&nbsp;&copy;
2021
&nbsp;/&nbsp;
<a href=https://tgc-thallium.com/blog/>Thallium's Blog</a>
&nbsp;&ndash;&nbsp;
<em class="fas fa-moon" id=dark-mode-toggle></em></p><p class="credits theme-by">Powered By <a href=https://gohugo.io>Hugo</a>&nbsp;
Theme
<a href=https://github.com/matsuyoshi30/harbor>Harbor</a></p></div></footer></body></html>