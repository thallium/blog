<!doctype html><html lang=en><head><meta charset=utf-8><title>Tutorial for Codeforces 1284D - New Year and Conference</title><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=alternate type=application/rss+xml href=https://blog.tgc-thallium.com/index.xml title="Thallium's Blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="Tutorial for Codeforces 1284D - New Year and Conference"><meta name=twitter:description content><link rel=stylesheet href=https://blog.tgc-thallium.com/fontawesome/css/all.min.css><link rel=stylesheet href=https://blog.tgc-thallium.com/css/main.css><link id=dark-mode-theme rel=stylesheet href=https://blog.tgc-thallium.com/css/dark.css><script>var darkTheme=document.getElementById('dark-mode-theme'),storedTheme=localStorage.getItem('dark-mode-storage');storedTheme==='dark'?darkTheme.disabled=!1:storedTheme==='light'&&(darkTheme.disabled=!0)</script><script src=https://blog.tgc-thallium.com/js/main.bundle.js></script><script src=https://blog.tgc-thallium.com/js/instantpage.min.js type=module defer></script><meta name=generator content="Hugo 0.83.1"></head><body><header><nav class=navbar><div class=nav><ul class=nav-links><li><a href=/ id=Home><em class="fas fa-home fa-lg"></em></a></li><li><a href=/about/ id=About><em class="fas fa-user fa-lg"></em></a></li><li><a href=/tags/ id=Tags><em class="fas fa-tag fa-lg"></em></a></li><li><a href=/categories/ id=Categories><em class="fas fa-list fa-lg"></em></a></li><li><a href=/archives/ id=Archives><em class="fas fa-archive fa-lg"></em></a></li><li><a href=/search/ id=Search><em class="fas fa-search fa-lg"></em></a></li></ul></div></nav><div class=intro-header><div class=container><div class=post-heading><h1>Tutorial for Codeforces 1284D - New Year and Conference</h1><span class=meta-post><em class="fa fa-calendar-alt"></em>&nbsp;May 14, 2020</span></div></div></div></header><div class=container role=main><article class=article class=blog-post><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.13.5/dist/katex.min.css integrity=sha384-L+Gq2Cso/Y2x8fX4wausgiZT8z0QPZz7OqPuz4YqAycQJyrJT9NRLpjFBD6zlOia crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.13.5/dist/katex.min.js integrity=sha384-z64WtjpyrKFsxox9eI4SI8eM9toXdoYeWb5Qh+8PO+eG54Bv9BZqf9xNhlcLf/sA crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.13.5/dist/contrib/auto-render.min.js integrity=sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl crossorigin=anonymous></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:'$$',right:'$$',display:!0},{left:'$',right:'$',display:!1},{left:'\\(',right:'\\)',display:!1},{left:'\\[',right:'\\]',display:!0}],throwOnError:!1})})</script><h2 id=solution>Solution</h2><p>The problem can be described as checking if there exists a pair of conferences that overlap in one dimension but not in the other dimension. In order to get all the segments that overlap with each other, we should know for all time points, which segments cover it. Specifically, we need some arrays $open_i$ and $close_i$ which store the segments that start at $i$ and close at $i$. So how can we know if there&rsquo;s a pair of segments that doesn&rsquo;t overlap on another dimension? We can maintain two multisets, one is the starting points of the current segments, the other is the end points. If the rightmost starting is bigger than the leftmost end point, this means that there exists a pair of segments that doesn&rsquo;t overlap.</p><p>Note that we need to compress the time points and check both dimension.</p><h2 id=题解>题解</h2><p>题目本质是判断能否找到一对线段使得他们在一个维度上相交但不在另一维度上不相交。为了得到所有相交的线段，我们要知道对于所有时间点被哪些线段覆盖了。具体一点就是需要几个数组$open_i$和$close_i$，分别存的是以$i$开头和结尾的线段。那么我们如何知道是否有一对线段不相交呢？我们还需要维护两个multiset，一个存当前线段的起点，另一个存终点。如果最右边的起点大于最左边的终点那么就说明有两个线段没重叠。</p><p>最后别忘了离散化并且两个维度都要检查一下。</p><h2 id=code>Code</h2><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;bits/stdc++.h&gt;</span><span style=color:#75715e>
</span><span style=color:#75715e></span>
<span style=color:#75715e>#define forn(i, n) for (int i = 0; i &lt; int(n); ++i)
</span><span style=color:#75715e>#define for1(i, n) for (int i = 1; i &lt;= int(n); ++i)
</span><span style=color:#75715e>#define ms(a, x) memset(a, x, sizeof(a))
</span><span style=color:#75715e>#define F first
</span><span style=color:#75715e>#define S second
</span><span style=color:#75715e>#define all(x) (x).begin(),(x).end()
</span><span style=color:#75715e>#define pb push_back
</span><span style=color:#75715e></span>
<span style=color:#00a8c8>using</span> <span style=color:#00a8c8>namespace</span> <span style=color:#111>std</span><span style=color:#111>;</span>
<span style=color:#00a8c8>typedef</span> <span style=color:#00a8c8>long</span> <span style=color:#00a8c8>long</span> <span style=color:#111>ll</span><span style=color:#111>;</span>
<span style=color:#00a8c8>typedef</span> <span style=color:#111>pair</span><span style=color:#f92672>&lt;</span><span style=color:#00a8c8>int</span><span style=color:#111>,</span> <span style=color:#00a8c8>int</span><span style=color:#f92672>&gt;</span> <span style=color:#111>pii</span><span style=color:#111>;</span>
<span style=color:#00a8c8>const</span> <span style=color:#00a8c8>int</span> <span style=color:#111>INF</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0x3f3f3f3f</span><span style=color:#111>;</span>
<span style=color:#111>mt19937</span> <span style=color:#75af00>gen</span><span style=color:#111>(</span><span style=color:#111>chrono</span><span style=color:#f92672>::</span><span style=color:#111>steady_clock</span><span style=color:#f92672>::</span><span style=color:#111>now</span><span style=color:#111>().</span><span style=color:#111>time_since_epoch</span><span style=color:#111>().</span><span style=color:#111>count</span><span style=color:#111>());</span>

<span style=color:#00a8c8>typedef</span> <span style=color:#111>vector</span><span style=color:#f92672>&lt;</span><span style=color:#00a8c8>int</span><span style=color:#f92672>&gt;</span> <span style=color:#111>vi</span><span style=color:#111>;</span>
<span style=color:#00a8c8>bool</span> <span style=color:#75af00>check</span><span style=color:#111>(</span><span style=color:#111>vi</span><span style=color:#f92672>&amp;</span> <span style=color:#111>sa</span><span style=color:#111>,</span><span style=color:#111>vi</span><span style=color:#f92672>&amp;</span> <span style=color:#111>ea</span><span style=color:#111>,</span><span style=color:#111>vi</span><span style=color:#f92672>&amp;</span> <span style=color:#111>sb</span><span style=color:#111>,</span><span style=color:#111>vi</span><span style=color:#f92672>&amp;</span> <span style=color:#111>eb</span><span style=color:#111>,</span><span style=color:#00a8c8>int</span> <span style=color:#111>m</span><span style=color:#111>){</span>
    <span style=color:#111>vector</span><span style=color:#f92672>&lt;</span><span style=color:#111>vector</span><span style=color:#f92672>&lt;</span><span style=color:#00a8c8>int</span><span style=color:#f92672>&gt;&gt;</span> <span style=color:#111>l</span><span style=color:#111>(</span><span style=color:#111>m</span><span style=color:#111>),</span><span style=color:#111>r</span><span style=color:#111>(</span><span style=color:#111>m</span><span style=color:#111>);</span>
    <span style=color:#00a8c8>int</span> <span style=color:#111>n</span><span style=color:#f92672>=</span><span style=color:#111>sa</span><span style=color:#111>.</span><span style=color:#111>size</span><span style=color:#111>();</span>
    <span style=color:#111>forn</span><span style=color:#111>(</span><span style=color:#111>i</span><span style=color:#111>,</span><span style=color:#111>n</span><span style=color:#111>){</span>
        <span style=color:#111>l</span><span style=color:#111>[</span><span style=color:#111>sa</span><span style=color:#111>[</span><span style=color:#111>i</span><span style=color:#111>]].</span><span style=color:#111>pb</span><span style=color:#111>(</span><span style=color:#111>i</span><span style=color:#111>);</span>
        <span style=color:#111>r</span><span style=color:#111>[</span><span style=color:#111>ea</span><span style=color:#111>[</span><span style=color:#111>i</span><span style=color:#111>]].</span><span style=color:#111>pb</span><span style=color:#111>(</span><span style=color:#111>i</span><span style=color:#111>);</span>
    <span style=color:#111>}</span>
    <span style=color:#111>multiset</span><span style=color:#f92672>&lt;</span><span style=color:#00a8c8>int</span><span style=color:#111>,</span><span style=color:#111>greater</span><span style=color:#f92672>&lt;</span><span style=color:#00a8c8>int</span><span style=color:#f92672>&gt;&gt;</span> <span style=color:#111>lmax</span><span style=color:#111>;</span>
    <span style=color:#111>multiset</span><span style=color:#f92672>&lt;</span><span style=color:#00a8c8>int</span><span style=color:#f92672>&gt;</span> <span style=color:#111>rmin</span><span style=color:#111>;</span>
    <span style=color:#111>forn</span><span style=color:#111>(</span><span style=color:#111>i</span><span style=color:#111>,</span><span style=color:#111>m</span><span style=color:#111>){</span>
        <span style=color:#00a8c8>for</span><span style=color:#111>(</span><span style=color:#00a8c8>auto</span> <span style=color:#111>id</span><span style=color:#111>:</span><span style=color:#111>l</span><span style=color:#111>[</span><span style=color:#111>i</span><span style=color:#111>])</span> <span style=color:#111>lmax</span><span style=color:#111>.</span><span style=color:#111>insert</span><span style=color:#111>(</span><span style=color:#111>sb</span><span style=color:#111>[</span><span style=color:#111>id</span><span style=color:#111>]),</span><span style=color:#111>rmin</span><span style=color:#111>.</span><span style=color:#111>insert</span><span style=color:#111>(</span><span style=color:#111>eb</span><span style=color:#111>[</span><span style=color:#111>id</span><span style=color:#111>]);</span>
        <span style=color:#00a8c8>if</span><span style=color:#111>(</span><span style=color:#f92672>!</span><span style=color:#111>empty</span><span style=color:#111>(</span><span style=color:#111>lmax</span><span style=color:#111>)</span><span style=color:#f92672>&amp;&amp;</span> <span style=color:#f92672>*</span><span style=color:#111>lmax</span><span style=color:#111>.</span><span style=color:#111>begin</span><span style=color:#111>()</span><span style=color:#f92672>&gt;</span> <span style=color:#f92672>*</span><span style=color:#111>rmin</span><span style=color:#111>.</span><span style=color:#111>begin</span><span style=color:#111>())</span> <span style=color:#00a8c8>return</span> <span style=color:#ae81ff>0</span><span style=color:#111>;</span>
        <span style=color:#00a8c8>for</span><span style=color:#111>(</span><span style=color:#00a8c8>auto</span> <span style=color:#111>id</span><span style=color:#111>:</span><span style=color:#111>r</span><span style=color:#111>[</span><span style=color:#111>i</span><span style=color:#111>]){</span>
            <span style=color:#111>lmax</span><span style=color:#111>.</span><span style=color:#111>erase</span><span style=color:#111>(</span><span style=color:#111>lmax</span><span style=color:#111>.</span><span style=color:#111>find</span><span style=color:#111>(</span><span style=color:#111>sb</span><span style=color:#111>[</span><span style=color:#111>id</span><span style=color:#111>]));</span> <span style=color:#111>rmin</span><span style=color:#111>.</span><span style=color:#111>erase</span><span style=color:#111>(</span><span style=color:#111>rmin</span><span style=color:#111>.</span><span style=color:#111>find</span><span style=color:#111>(</span><span style=color:#111>eb</span><span style=color:#111>[</span><span style=color:#111>id</span><span style=color:#111>]));</span>
        <span style=color:#111>}</span>
    <span style=color:#111>}</span>
    <span style=color:#00a8c8>return</span> <span style=color:#ae81ff>1</span><span style=color:#111>;</span>
<span style=color:#111>}</span>
<span style=color:#00a8c8>int</span> <span style=color:#75af00>main</span><span style=color:#111>()</span> <span style=color:#111>{</span>
    <span style=color:#111>ios</span><span style=color:#f92672>::</span><span style=color:#111>sync_with_stdio</span><span style=color:#111>(</span><span style=color:#111>false</span><span style=color:#111>);</span>
    <span style=color:#111>cin</span><span style=color:#111>.</span><span style=color:#111>tie</span><span style=color:#111>(</span><span style=color:#00a8c8>nullptr</span><span style=color:#111>);</span>
    <span style=color:#00a8c8>int</span> <span style=color:#111>n</span><span style=color:#111>;</span>
    <span style=color:#111>cin</span><span style=color:#f92672>&gt;&gt;</span><span style=color:#111>n</span><span style=color:#111>;</span>
    <span style=color:#111>vector</span><span style=color:#f92672>&lt;</span><span style=color:#00a8c8>int</span><span style=color:#f92672>&gt;</span> <span style=color:#111>sa</span><span style=color:#111>(</span><span style=color:#111>n</span><span style=color:#111>),</span><span style=color:#111>sb</span><span style=color:#111>(</span><span style=color:#111>n</span><span style=color:#111>),</span><span style=color:#111>ea</span><span style=color:#111>(</span><span style=color:#111>n</span><span style=color:#111>),</span><span style=color:#111>eb</span><span style=color:#111>(</span><span style=color:#111>n</span><span style=color:#111>);</span>
    <span style=color:#111>forn</span><span style=color:#111>(</span><span style=color:#111>i</span><span style=color:#111>,</span><span style=color:#111>n</span><span style=color:#111>)</span> <span style=color:#111>rd</span><span style=color:#111>(</span><span style=color:#111>sa</span><span style=color:#111>[</span><span style=color:#111>i</span><span style=color:#111>],</span><span style=color:#111>ea</span><span style=color:#111>[</span><span style=color:#111>i</span><span style=color:#111>],</span><span style=color:#111>sb</span><span style=color:#111>[</span><span style=color:#111>i</span><span style=color:#111>],</span><span style=color:#111>eb</span><span style=color:#111>[</span><span style=color:#111>i</span><span style=color:#111>]);</span>
    <span style=color:#111>vector</span><span style=color:#f92672>&lt;</span><span style=color:#00a8c8>int</span><span style=color:#f92672>&gt;</span> <span style=color:#111>time</span><span style=color:#111>;</span><span style=color:#111>time</span><span style=color:#111>.</span><span style=color:#111>reserve</span><span style=color:#111>(</span><span style=color:#ae81ff>4</span><span style=color:#f92672>*</span><span style=color:#111>n</span><span style=color:#111>);</span>
    <span style=color:#00a8c8>for</span><span style=color:#111>(</span><span style=color:#00a8c8>auto</span> <span style=color:#111>it</span><span style=color:#111>:</span><span style=color:#111>sa</span><span style=color:#111>)</span> <span style=color:#111>time</span><span style=color:#111>.</span><span style=color:#111>pb</span><span style=color:#111>(</span><span style=color:#111>it</span><span style=color:#111>);</span>
    <span style=color:#00a8c8>for</span><span style=color:#111>(</span><span style=color:#00a8c8>auto</span> <span style=color:#111>it</span><span style=color:#111>:</span><span style=color:#111>ea</span><span style=color:#111>)</span> <span style=color:#111>time</span><span style=color:#111>.</span><span style=color:#111>pb</span><span style=color:#111>(</span><span style=color:#111>it</span><span style=color:#111>);</span>
    <span style=color:#00a8c8>for</span><span style=color:#111>(</span><span style=color:#00a8c8>auto</span> <span style=color:#111>it</span><span style=color:#111>:</span><span style=color:#111>sb</span><span style=color:#111>)</span> <span style=color:#111>time</span><span style=color:#111>.</span><span style=color:#111>pb</span><span style=color:#111>(</span><span style=color:#111>it</span><span style=color:#111>);</span>
    <span style=color:#00a8c8>for</span><span style=color:#111>(</span><span style=color:#00a8c8>auto</span> <span style=color:#111>it</span><span style=color:#111>:</span><span style=color:#111>eb</span><span style=color:#111>)</span> <span style=color:#111>time</span><span style=color:#111>.</span><span style=color:#111>pb</span><span style=color:#111>(</span><span style=color:#111>it</span><span style=color:#111>);</span>
    <span style=color:#111>sort</span><span style=color:#111>(</span><span style=color:#111>all</span><span style=color:#111>(</span><span style=color:#111>time</span><span style=color:#111>));</span>
    <span style=color:#111>time</span><span style=color:#111>.</span><span style=color:#111>resize</span><span style=color:#111>(</span><span style=color:#111>unique</span><span style=color:#111>(</span><span style=color:#111>all</span><span style=color:#111>(</span><span style=color:#111>time</span><span style=color:#111>))</span><span style=color:#f92672>-</span><span style=color:#111>time</span><span style=color:#111>.</span><span style=color:#111>begin</span><span style=color:#111>());</span>
    <span style=color:#111>forn</span><span style=color:#111>(</span><span style=color:#111>i</span><span style=color:#111>,</span><span style=color:#111>n</span><span style=color:#111>){</span>
        <span style=color:#111>sa</span><span style=color:#111>[</span><span style=color:#111>i</span><span style=color:#111>]</span><span style=color:#f92672>=</span><span style=color:#111>lower_bound</span><span style=color:#111>(</span><span style=color:#111>all</span><span style=color:#111>(</span><span style=color:#111>time</span><span style=color:#111>),</span><span style=color:#111>sa</span><span style=color:#111>[</span><span style=color:#111>i</span><span style=color:#111>])</span><span style=color:#f92672>-</span><span style=color:#111>time</span><span style=color:#111>.</span><span style=color:#111>begin</span><span style=color:#111>();</span>
        <span style=color:#111>ea</span><span style=color:#111>[</span><span style=color:#111>i</span><span style=color:#111>]</span><span style=color:#f92672>=</span><span style=color:#111>lower_bound</span><span style=color:#111>(</span><span style=color:#111>all</span><span style=color:#111>(</span><span style=color:#111>time</span><span style=color:#111>),</span><span style=color:#111>ea</span><span style=color:#111>[</span><span style=color:#111>i</span><span style=color:#111>])</span><span style=color:#f92672>-</span><span style=color:#111>time</span><span style=color:#111>.</span><span style=color:#111>begin</span><span style=color:#111>();</span>
        <span style=color:#111>sb</span><span style=color:#111>[</span><span style=color:#111>i</span><span style=color:#111>]</span><span style=color:#f92672>=</span><span style=color:#111>lower_bound</span><span style=color:#111>(</span><span style=color:#111>all</span><span style=color:#111>(</span><span style=color:#111>time</span><span style=color:#111>),</span><span style=color:#111>sb</span><span style=color:#111>[</span><span style=color:#111>i</span><span style=color:#111>])</span><span style=color:#f92672>-</span><span style=color:#111>time</span><span style=color:#111>.</span><span style=color:#111>begin</span><span style=color:#111>();</span>
        <span style=color:#111>eb</span><span style=color:#111>[</span><span style=color:#111>i</span><span style=color:#111>]</span><span style=color:#f92672>=</span><span style=color:#111>lower_bound</span><span style=color:#111>(</span><span style=color:#111>all</span><span style=color:#111>(</span><span style=color:#111>time</span><span style=color:#111>),</span><span style=color:#111>eb</span><span style=color:#111>[</span><span style=color:#111>i</span><span style=color:#111>])</span><span style=color:#f92672>-</span><span style=color:#111>time</span><span style=color:#111>.</span><span style=color:#111>begin</span><span style=color:#111>();</span>
    <span style=color:#111>}</span>
    <span style=color:#00a8c8>if</span><span style=color:#111>(</span><span style=color:#111>check</span><span style=color:#111>(</span><span style=color:#111>sa</span><span style=color:#111>,</span><span style=color:#111>ea</span><span style=color:#111>,</span><span style=color:#111>sb</span><span style=color:#111>,</span><span style=color:#111>eb</span><span style=color:#111>,</span><span style=color:#111>time</span><span style=color:#111>.</span><span style=color:#111>size</span><span style=color:#111>())</span><span style=color:#f92672>&amp;&amp;</span> <span style=color:#111>check</span><span style=color:#111>(</span><span style=color:#111>sb</span><span style=color:#111>,</span><span style=color:#111>eb</span><span style=color:#111>,</span><span style=color:#111>sa</span><span style=color:#111>,</span><span style=color:#111>ea</span><span style=color:#111>,</span><span style=color:#111>time</span><span style=color:#111>.</span><span style=color:#111>size</span><span style=color:#111>()))</span> <span style=color:#111>cout</span><span style=color:#f92672>&lt;&lt;</span><span style=color:#d88200>&#34;YES&#34;</span><span style=color:#111>;</span>
    <span style=color:#00a8c8>else</span> <span style=color:#111>cout</span><span style=color:#f92672>&lt;&lt;</span><span style=color:#d88200>&#34;NO&#34;</span><span style=color:#111>;</span>

    <span style=color:#00a8c8>return</span> <span style=color:#ae81ff>0</span><span style=color:#111>;</span>
<span style=color:#111>}</span>
</code></pre></div><div class=blog-tags><a href=https://blog.tgc-thallium.com/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/data-structure/>数据结构/Data Structure</a>&nbsp;</div></article></div><footer><div class=social-icons><a href=https://github.com/thallium name=GitHub><em class="fab fa-github"></em></a></div><div class=container><p class="credits copyright"><a href=https://blog.tgc-thallium.com/about>hugo author</a>
&nbsp;&copy;
2021
&nbsp;/&nbsp;
<a href=https://blog.tgc-thallium.com/>Thallium's Blog</a>
&nbsp;&ndash;&nbsp;
<em class="fas fa-moon" id=dark-mode-toggle></em></p><p class="credits theme-by">Powered By <a href=https://gohugo.io>Hugo</a>&nbsp;
Theme
<a href=https://github.com/matsuyoshi30/harbor>Harbor</a></p></div></footer></body></html>